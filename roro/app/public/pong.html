<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="UTF-8" />
  <title>Essai Pong</title>
  <script src="https://cdn.babylonjs.com/ammo.js"></script>
  <script src="https://cdn.babylonjs.com/babylon.js"></script>
  <script src="https://cdn.babylonjs.com/loaders/babylon.glTF2FileLoader.js"></script>
  <script src="https://cdn.babylonjs.com/gui/babylon.gui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>
  <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Press+Start+2P&display=swap" rel="stylesheet" />
  <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>
  <style>
    body {
      font-family: 'Press Start 2P', cursive, monospace;
      background: linear-gradient(135deg, #1f2937 0%, #000000 100%);
      margin: 0;
      min-height: 100vh;
      color: #facc15; 
    }

    #renderCanvas {
      display: none;
      box-sizing: border-box;
      position: absolute;
      top: 60%;
      left: 50%;
      transform: translate(-50%, -50%);
      border: 4px solid #fbbf24; /* yellow-400 */
      border-radius: 12px;
      box-shadow: 0 0 20px #fbbf24;
      background-color: #000000;
      max-width: 90vw;
      max-height: 50vh;
    }

    /* Spinner animation */
    @keyframes spin {
      to {
        transform: rotate(360deg);
      }
    }
  </style>
</head>

<body>

  <!-- Menu de sélection du mode de jeu -->
  <section id="gameModeSelection"
    class="flex flex-col items-center justify-center min-h-screen px-6 space-y-16 bg-gradient-to-br from-gray-900 via-black to-gray-800 text-yellow-400 select-none">

    <h1 class="text-4xl sm:text-5xl text-yellow-400 text-center tracking-widest drop-shadow-lg">
      Choisis ton mode de jeu
    </h1>

    <div class="flex flex-col sm:flex-row gap-10">
      <button id="localButton"
        class="px-8 py-5 bg-blue-700 hover:bg-blue-900 border-4 border-blue-400 rounded-lg shadow-lg transition text-lg sm:text-xl">
        🎮 Local
      </button>
      <button id="remoteButton"
        class="px-8 py-5 bg-green-700 hover:bg-green-900 border-4 border-green-400 rounded-lg shadow-lg transition text-lg sm:text-xl">
        🌍 En ligne
      </button>
      <button id="tournamentButton"
        class="px-8 py-5 bg-purple-700 hover:bg-purple-900 border-4 border-purple-400 rounded-lg shadow-lg transition text-lg sm:text-xl">
        🏆 Tournoi
      </button>
    </div>
  </section>

  <!-- Scores (initialement cachés) -->
  <section
    id="scoresSection"
    class="hidden fixed top-6 left-1/2 transform -translate-x-1/2 w-full max-w-5xl px-6 flex justify-between bg-black bg-opacity-70 border-4 border-yellow-400 rounded-lg shadow-lg select-none text-yellow-400 font-[Press_Start_2P]">

    <div class="flex flex-col items-center px-4">
      <span class="text-sm text-yellow-300">Joueur 1</span>
      <span id="player1ScoreValue" class="text-5xl font-bold">0</span>
    </div>

    <div class="flex flex-col items-center px-4">
      <span class="text-sm text-yellow-300">Joueur 2</span>
      <span id="player2ScoreValue" class="text-5xl font-bold">0</span>
    </div>
  </section>

  <!-- File d’attente de match -->
  <section id="waitingForMatch"
    class="hidden fixed inset-0 bg-black bg-opacity-95 flex flex-col justify-center items-center z-50 text-yellow-400 font-[Press_Start_2P] text-center space-y-8 px-8">

    <div class="w-24 h-24 rounded-full border-4 border-yellow-400 border-t-transparent animate-spin"></div>

    <p id="matchStatus" class="text-xl sm:text-2xl tracking-wider drop-shadow-md">
      Recherche d’un adversaire...
    </p>

    <p id="opponentName" class="text-lg sm:text-xl text-green-400 hidden tracking-wider">
      ⚔️ Adversaire trouvé : <span id="opponentNameValue" class="text-white"></span>
    </p>

    <button id="cancelQueue"
      class="mt-4 px-8 py-3 bg-red-700 hover:bg-red-900 border-4 border-red-500 rounded-lg shadow-md text-sm sm:text-base transition">
      ⛔ Annuler
    </button>
  </section>

  <canvas id="renderCanvas"></canvas>

  <!-- Scripts JS -->
  <script type="module" src="/script/game/main.js"></script>
  <script type="module" src="/game.js"></script>
</body>

</html>
